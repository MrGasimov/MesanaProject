package com.corvolution.mesana.configurator;

import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Text;

import com.corvolution.cm2.SensorEvent;
import com.corvolution.cm2.SensorListener;
import com.corvolution.mesana.gui.ReaderGui;

public class GuiUpdater implements SensorListener{
	private ReaderGui gui;
	private Text text;
    
	public GuiUpdater(ReaderGui gui){
		this.gui = gui;
		this.text = gui.getText();
	}
   
	private static void doUpdate(final Display display, final Text target, final String value) {
		    display.asyncExec(new Runnable() {
		      @Override
		      public void run() {
		        if (!target.isDisposed()) {
		          target.setText("Sensor "+value+" has been connected");
		         // target.getParent().layout();
		        }
		      }
		    });
		  }
	
	@Override
	public void sensorConnection(SensorEvent e) {
		  Thread updateThread = new Thread(new Runnable(){
			@Override
			public void run() {				
				doUpdate(Display.getDefault(),text, e.getSensorPath() );
			}
			  
		  });
		  updateThread.start();
		
	}


	

}
