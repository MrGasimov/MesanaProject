import java.io.BufferedOutputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class Test {

	public static void main(String[] args) {
		write();
		read();

	}
	
	public static void read(){
		String absolutePath = "Z:/config.cm";
		try {
			byte[] buffer = new byte[21];
			FileInputStream inputStream = new FileInputStream(absolutePath);
			int total = 0;
	        int nRead = 0;	        
	        while((nRead = inputStream.read(buffer)) != -1) {
	        	total += nRead;
	        	System.out.println(total);
            }  
	        
	        for(byte s:buffer){
	        	System.out.print(s);
	        }
	        
	        inputStream.close();  				
		}catch(FileNotFoundException ex){
				ex.printStackTrace();
          	}catch(IOException ex) {
                ex.printStackTrace();
            }
	}
	
	public static void write(){
		// The name of the file to create.
        String fileName = "z:/config.cm";
        
        try {
            byte versionMajor =1;
            byte versionMinor=2;
            byte startMode = 1;
            byte configSet = 1;
            byte[] recordDuration = {2,3,4,5,6,7};
            byte[] startTime = {1,3,1,1,1,5};
            byte latency = 0;
            byte[] checksum ={2,2,2,2};          	

            byte[] buffer ={versionMajor,versionMinor,startMode,configSet,recordDuration[0],
            		recordDuration[1],recordDuration[2],recordDuration[3],recordDuration[4],
            		recordDuration[5],startTime[0],startTime[1],startTime[2],
            		startTime[3], startTime[4], startTime[5],latency,checksum[0],checksum[1],checksum[2],checksum[3]};

            FileOutputStream outputStream = new FileOutputStream(fileName);
            BufferedOutputStream out = new BufferedOutputStream(outputStream);
            // write() writes as many bytes from the buffer
            // as the length of the buffer. You can also
            // use
            // write(buffer, offset, length)
            // if you want to write a specific number of
            // bytes, or only part of the buffer.
            outputStream.write(buffer);

            
            out.flush();
            outputStream.close();       
            System.out.println("Wrote " + buffer.length +" bytes");
	
        }catch(IOException ex) {        	
        	ex.printStackTrace();
    }
	}
}
