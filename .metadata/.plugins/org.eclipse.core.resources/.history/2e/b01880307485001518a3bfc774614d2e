package com.corvolution.cm2;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

public class ConnectionManager {
	
	
	public static boolean state;
	public static int counter;
	private static List<Sensor>sensorList = new ArrayList<>();
	private static String sensorPath;
		
	public static  void setState(boolean status){
		state = status;
	}	
	public static boolean getState(){
		return state;
	}	
	public static void setCounter(int count){
		counter = count;
	}	
	public static int getCounter(){
		return counter;
	}	
	
	//adds connected sensor path to array 
	public static void addSensorToList(String path) throws IOException{
		Sensor sensor = new Sensor(path);
		sensorList.add(sensor);
		
	}
	//deletes disconnected sensor from array
	public static void removeSensorFromList(String path){
		for(Sensor device:sensorList){
			if(device.getSensorPath().equals(path))
					device = null;
		}				
	}
		
	//starts thread for listening and notifies Manager about any connection
	public void startListener(){
		Thread sensorListener = new Thread(new ConnectionListener());
		sensorListener.start();
	}
	
	//returns list of connected sensors
	public static List<Sensor> getConnectedSensorsList(){
		return sensorList;
	}	
	

	public Sensor currentSensor(){
		if(counter == 1){
			return sensorList.get(0);
		}
		
	}
	
	//
	public void notifyMultiSensor(){
		
	}
	
}