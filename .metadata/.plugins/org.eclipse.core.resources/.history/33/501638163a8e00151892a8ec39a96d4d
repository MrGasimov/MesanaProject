package com.corvolution.mesana.configurator;
import org.json.simple.JSONObject;

import com.corvolution.cm2.ConnectionManager;
import com.corvolution.cm2.UsbListener;
import com.corvolution.mesana.gui.ConfigGui;
import com.corvolution.mesana.gui.OperatorAccess;
import com.corvolution.mesana.gui.ReaderGui;
import com.corvolution.mesana.rest.RestApiConnector;


public class MainClass {

	public static void main(String[] args) {
		/*
		Thread usbListener = new Thread(new UsbListener());
		usbListener.start();
		PropertyManager pManager = new PropertyManager();
		OperatorAccess opAccess = new OperatorAccess();				
		ConnectionManager.getInstance().addSensorListener(new GuiUpdater(pManager.getProperty("GUI_MODE")));
		if(pManager.getProperty("GUI_MODE").equals("CONFIGURATOR")){
			new ConfigGui(opAccess.getLogin(),opAccess.getPassword()); 
		}else{
			new ReaderGui(opAccess.getLogin(),opAccess.getPassword());
		}
		*/
		
		PropertyManager pManager = new PropertyManager();
		RestApiConnector r = new RestApiConnector();
		
			JSONObject jsonComment = new JSONObject();
			jsonComment.put("comment","djfsjfsdjh");
			jsonComment.put("user", "suli");
			//jsonComment.put("sensorId","00816");
			String commentJSON = jsonComment.toJSONString();
			String cURL =pManager.getProperty("REST_PATH")+"measurements/55155332C862C/comments";	
			System.out.println("this is comment status");	
			try {
				r.postMethod(commentJSON,cURL);
			}catch (Exception e){			
				e.printStackTrace();
			}
		
			JSONObject jsonElectrode = new JSONObject();
			jsonElectrode.put("comment","lot 12312");
			jsonElectrode.put("user","suli");
			String electrodeJSON = jsonElectrode.toJSONString();
			String eURL =pManager.getProperty("REST_PATH")+"measurements/55155332C862C/electrodes";	
			System.out.println("this is celectrode status");
			try {
				r.postMethod(electrodeJSON,eURL);
			}catch (Exception e){			
				e.printStackTrace();
			}
		
				
				
			JSONObject jsonState = new JSONObject();
			jsonState.put("state","CONFIGURING");
			jsonState.put("user","suli");
			
			String stateJSON = jsonState.toJSONString();
			String sURL =pManager.getProperty("REST_PATH")+"measurements/55155332C862C/";	
			System.out.println("this is state status");
			try {
				r.putMethod(stateJSON,sURL);
			} catch (Exception e) {
				
				e.printStackTrace();
			}
			
			JSONObject jsonFirmware = new JSONObject();
			jsonFirmware.put("firmware","1.32.6");
			jsonFirmware.put("user", "suli");	
			String firmwareJson = jsonFirmware.toJSONString();
			String fURL =pManager.getProperty("REST_PATH")+"sensors/"+"00816";
			System.out.println("this is firmware status");
			
			try {
				r.putMethod(firmwareJson,fURL);
			} catch (Exception e) {
				
				e.printStackTrace();
			}
			
			JSONObject jsonState2 = new JSONObject();
			jsonState2.put("state","SENSOR_OUTBOX");
			jsonState2.put("user","suli");
			jsonState2.put("sensorId","00816");
			String stateJSON2 = jsonState.toJSONString();
			String s2URL =pManager.getProperty("REST_PATH")+"measurements/55155332C862C/";	
			System.out.println("this is 2 state status");
			try {
				r.putMethod(stateJSON2,s2URL);
			} catch (Exception e) {
				
				e.printStackTrace();
			}				
	
			System.out.println("uraaaaaaaaaaaaaaaaaaaaaa");
	}

}
